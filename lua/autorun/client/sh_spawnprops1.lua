--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------
Props_1 = {}
Props_1[1] = "models/props/gm_assault/assault_metal_awning.mdl"
Props_1[2] = "models/props/gm_assault/cardboardbox_single.mdl"
Props_1[3] = "models/props/gm_assault/box_stack2.mdl"
Props_1[4] = "models/props/gm_assault/drug_pallet03.mdl"
Props_1[5] = "models/props/gm_assault/drug_pallet03a.mdl"
Props_1[6] = "models/props/gm_assault/drug_pallet04.mdl"
Props_1[7] = "models/props/gm_assault/drug_pallet05.mdl"
Props_1[8] = "models/props/gm_assault/dryer_box.mdl"
Props_1[9] = "models/props/gm_assault/dryer_box2.mdl"
Props_1[10] = "models/props/gm_assault/gun_pallet01.mdl"
Props_1[11] = "models/props/gm_assault/moneypallet.mdl"
Props_1[12] = "models/props/gm_assault/moneypallet02.mdl"
Props_1[13] = "models/props/gm_assault/moneypallet03.mdl"
Props_1[14] = "models/props/gm_assault/moneypallet_washerdryer.mdl"
Props_1[15] = "models/props/gm_assault/rustyrailing02.mdl"
Props_1[16] = "models/props/gm_assault/security_cage.mdl"
Props_1[17] = "models/props/gm_assault/tools_cage.mdl"
Props_1[18] = "models/props/gm_vertigo/2x4_metal_128x256.mdl"
Props_1[19] = "models/props/gm_vertigo/2x4_metal_256x256.mdl"
Props_1[20] = "models/props/gm_vertigo/2x4_metal_64x256.mdl"
Props_1[21] = "models/props/gm_vertigo/512_truss_downstairs.mdl"
Props_1[22] = "models/props_c17/concrete_barrier001a.mdl"
Props_1[23] = "models/props_exteriors/roadsidefence_512.mdl"
Props_1[24] = "models/props_exteriors/roadsidefence_64.mdl"
Props_1[25] = "models/props_fortifications/fortification_indoor_01.mdl"
Props_1[26] = "models/props_fortifications/sandbags_corner2.mdl"
Props_1[27] = "models/props_fortifications/sandbags_corner3.mdl"
Props_1[28] = "models/props_fortifications/sandbags_line2.mdl"
Props_1[29] = "models/props_interiors/constructionwalls01.mdl"
Props_1[30] = "models/props_interiors/constructionwalls02.mdl"
Props_1[31] = "models/props_interiors/constructionwalls02checkpoint.mdl"
Props_1[32] = "models/props_interiors/constructionwalls03.mdl"
Props_1[33] = "models/props_interiors/constructionwalls04.mdl"
Props_1[34] = "models/props_interiors/constructionwalls04_frame.mdl"
--Props_1[35] = "models/props_street/barricade_door_01.mdl"
--Props_1[36] = "models/props_street/manhole_cover.mdl"
--Props_1[37] = "models/props_street/police_barricade.mdl"
--Props_1[38] = "models/props_street/police_barricade2.mdl"
--Props_1[39] = "models/props_street/police_barricade3.mdl"
--Props_1[40] = "models/props_street/police_barricade4.mdl"
--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------
--Props_1[41] = "models/props_street/police_barricade_368in.mdl"
--Props_1[42] = "models/props_street/police_barricade_496in.mdl"
Props_1[35] = "models/props_wasteland/barricade001a.mdl"
Props_1[36] = "models/props_wasteland/barricade002a.mdl"
Props_1[37] = "models/props_wasteland/exterior_fence001a.mdl"
Props_1[38] = "models/props_wasteland/exterior_fence001b.mdl"
Props_1[39] = "models/props_wasteland/exterior_fence002a.mdl"
Props_1[40] = "models/props_wasteland/exterior_fence002b.mdl"
Props_1[41] = "models/props_wasteland/exterior_fence002c.mdl"
Props_1[42] = "models/props_wasteland/exterior_fence002d.mdl"
Props_1[43] = "models/props_wasteland/exterior_fence002e.mdl"
Props_1[44] = "models/props_wasteland/exterior_fence003a.mdl"
Props_1[45] = "models/props_wasteland/exterior_fence003b.mdl"
Props_1[46] = "models/props_wasteland/interior_fence001a.mdl"
Props_1[47] = "models/props_wasteland/interior_fence001b.mdl"
Props_1[48] = "models/props_wasteland/interior_fence001c.mdl"
Props_1[49] = "models/props_wasteland/interior_fence001d.mdl"
Props_1[50] = "models/props_wasteland/interior_fence001e.mdl"
Props_1[51] = "models/props_wasteland/interior_fence001g.mdl"
Props_1[52] = "models/props_wasteland/interior_fence002a.mdl"
Props_1[53] = "models/props_wasteland/interior_fence002b.mdl"
Props_1[54] = "models/props_wasteland/interior_fence002c.mdl"
Props_1[55] = "models/props_wasteland/interior_fence002d.mdl"
Props_1[56] = "models/props_wasteland/interior_fence002e.mdl"
Props_1[57] = "models/props_wasteland/interior_fence002f.mdl"
Props_1[58] = "models/props_wasteland/interior_fence003a.mdl"
Props_1[59] = "models/props_wasteland/interior_fence003b.mdl"
Props_1[60] = "models/props_wasteland/interior_fence003d.mdl"
Props_1[61] = "models/props_wasteland/interior_fence003e.mdl"
Props_1[62] = "models/props_wasteland/interior_fence003f.mdl"


--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------


Props_2 = {}
Props_2[1] = "models/balloons/balloon_classicheart.mdl"
Props_2[2] = "models/balloons/balloon_dog.mdl"
Props_2[3] = "models/balloons/balloon_star.mdl"
Props_2[4] = "models/chairs/armchair.mdl"
Props_2[5] = "models/dav0r/camera.mdl"
Props_2[6] = "models/dav0r/hoverball.mdl"
Props_2[7] = "models/dav0r/buttons/button.mdl"
Props_2[8] = "models/dav0r/buttons/switch.mdl"
Props_2[9] = "models/food/burger.mdl"
Props_2[10] = "models/food/hotdog.mdl"
Props_2[11] = "models/lamps/torch.mdl"
Props_2[12] = "models/maxofs2d/balloon_classic.mdl"
Props_2[13] = "models/maxofs2d/balloon_gman.mdl"
Props_2[14] = "models/maxofs2d/balloon_mossman.mdl"
Props_2[15] = "models/maxofs2d/button_01.mdl"
Props_2[16] = "models/maxofs2d/button_02.mdl"
Props_2[17] = "models/maxofs2d/button_03.mdl"
Props_2[18] = "models/maxofs2d/button_04.mdl"
Props_2[19] = "models/maxofs2d/button_05.mdl"
Props_2[20] = "models/maxofs2d/button_06.mdl"
Props_2[21] = "models/maxofs2d/button_slider.mdl"
--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------
Props_2[22] = "models/maxofs2d/camera.mdl"
Props_2[23] = "models/maxofs2d/companion_doll.mdl"
Props_2[24] = "models/maxofs2d/construct_sign.mdl"
Props_2[25] = "models/maxofs2d/gm_painting.mdl"
Props_2[26] = "models/maxofs2d/hover_basic.mdl"
Props_2[27] = "models/maxofs2d/hover_classic.mdl"
Props_2[28] = "models/maxofs2d/hover_plate.mdl"
Props_2[29] = "models/maxofs2d/hover_propeller.mdl"
Props_2[30] = "models/maxofs2d/hover_rings.mdl"
Props_2[31] = "models/maxofs2d/lamp_flashlight.mdl"
Props_2[32] = "models/maxofs2d/lamp_projector.mdl"
Props_2[33] = "models/maxofs2d/light_tubular.mdl"
Props_2[34] = "models/maxofs2d/logo_gmod_b.mdl"
Props_2[35] = "models/maxofs2d/motion_sensor.mdl"
Props_2[36] = "models/maxofs2d/thruster_projector.mdl"
Props_2[37] = "models/maxofs2d/thruster_propeller.mdl"
Props_2[38] = "models/mechanics/various/211.mdl"
Props_2[39] = "models/noesis/donut.mdl"
Props_2[40] = "models/nova/airboat_seat.mdl"
Props_2[41] = "models/nova/airboat_seat.mdl"
Props_2[42] = "models/nova/chair_office02.mdl"
Props_2[43] = "models/nova/chair_plastic01.mdl"
Props_2[44] = "models/nova/chair_wood01.mdl"
Props_2[45] = "models/nova/jalopy_seat.mdl"
Props_2[46] = "models/nova/jeep_seat.mdl"
Props_2[47] = "models/player/items/humans/top_hat.mdl"
Props_2[48] = "models/props_foliage/tree_springers_01a-lod.mdl"
Props_2[49] = "models/props_foliage/tree_springers_01a.mdl"
Props_2[50] = "models/props_phx/ball.mdl"
Props_2[51] = "models/props_phx/box_amraam.mdl"
Props_2[52] = "models/props_phx/box_torpedo.mdl"
Props_2[53] = "models/props_phx/box_torpedo.mdl"
Props_2[54] = "models/props_phx/chrome_tire.mdl"
Props_2[55] = "models/props_phx/carseat.mdl"
Props_2[56] = "models/props_phx/empty_barrel.mdl"
Props_2[57] = "models/props_phx/facepunch_barrel.mdl"
Props_2[58] = "models/props_phx/normal_tire.mdl"
Props_2[59] = "models/props_phx/smallwheel.mdl"
Props_2[60] = "models/props_phx/rt_screen.mdl"
Props_2[61] = "models/props_phx/sp_screen.mdl"
Props_2[62] = "models/props_phx/construct/concrete_barrier00.mdl"
--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------
Props_2[63] = "models/props_phx/construct/concrete_barrier01.mdl"
Props_2[64] = "models/props_phx/games/chess/black_bishop.mdl"
Props_2[65] = "models/props_phx/games/chess/black_dama.mdl"
Props_2[66] = "models/props_phx/games/chess/black_king.mdl"
Props_2[67] = "models/props_phx/games/chess/black_knight.mdl"
Props_2[68] = "models/props_phx/games/chess/black_pawn.mdl"
Props_2[69] = "models/props_phx/games/chess/black_queen.mdl"
Props_2[70] = "models/props_phx/games/chess/black_rook.mdl"
Props_2[71] = "models/props_phx/games/chess/board.mdl"
Props_2[72] = "models/props_phx/games/chess/white_bishop.mdl"
Props_2[73] = "models/props_phx/games/chess/white_dama.mdl"
Props_2[74] = "models/props_phx/games/chess/white_king.mdl"
Props_2[75] = "models/props_phx/games/chess/white_knight.mdl"
Props_2[76] = "models/props_phx/games/chess/white_pawn.mdl"
Props_2[77] = "models/props_phx/games/chess/white_queen.mdl"
Props_2[78] = "models/props_phx/games/chess/white_rook.mdl"
Props_2[79] = "models/props_phx/misc/fender.mdl"
Props_2[80] = "models/props_phx/misc/soccerball.mdl"
Props_2[81] = "models/xqm/hydcontrolbox.mdl"
Props_2[82] = "models/xqm/hydcontrolbox.mdl"


if CLIENT then
    local CfgVars = {}
    local WEBSITE = {}
    CfgVars["EquipmentDecayTimer"] = 3
    CfgVars["WeaponDecayTimer"] = 3
    CfgVars["DrugDecayTimer"] = 3
    local buytable = {}
    buytable["Баррикады:"] = {}
    buytable["Баррикады:"].Model = Props_1
    buytable["Баррикады:"].Data = Props_1
    buytable["Другое:"] = {}
    buytable["Другое:"].Model = Props_2
    buytable["Другое:"].Data = Props_2
    local PANEL = {}

    function PANEL:Init()
        self.PanelList = vgui.Create("DPanelList", self)
        self.PanelList:SetPadding(4)
        self.PanelList:SetSpacing(2)
        self.PanelList:EnableVerticalScrollbar(true)
        self:BuildList()
    end

    local function AddComma(n)
        local sn = tostring(n)
        sn = string.ToTable(sn)
        local tab = {}

        for i = 0, #sn - 1 do
            if i % 3 == #sn % 3 and not (i == 0) then
                table.insert(tab, ",")
            end

            table.insert(tab, sn[i + 1])
        end

        return string.Implode("", tab)
    end

    function PANEL:BuildList()
        self.PanelList:Clear()
        local Categorised = {}

        for k, v in pairs(buytable) do
            v.Category = k
            Categorised[v.Category] = Categorised[v.Category] or {}
            table.insert(Categorised[v.Category], v)
        end

        for CategoryName, v in SortedPairs(Categorised) do
            local Category = vgui.Create("DCollapsibleCategory", self)
            self.PanelList:AddItem(Category)
            Category:SetExpanded(false)
            Category:SetLabel(CategoryName)
            Category:SetCookieName("EntitySpawn." .. CategoryName)
            local Content = vgui.Create("DPanelList")
            Category:SetContents(Content)
            Content:EnableHorizontal(true)
            Content:SetDrawBackground(false)
            Content:SetSpacing(2)
            Content:SetPadding(2)
            Content:SetAutoSize(true)
            number = 1
			--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------

            for k, v in pairs(buytable[CategoryName].Model) do
              
                local Icon = vgui.Create("SpawnIcon", self)
                local Model = buytable[CategoryName].Model[number]

                if (buytable[CategoryName].Model[number] ~= nil) then
                    Icon:SetModel(buytable[CategoryName].Model[number])
                else
                    Icon:SetModel("models/error.mdl")
                end

                Icon.DoClick = function()
                    RunConsoleCommand("gm_spawn", Model)
                end

                local lable = vgui.Create("DLabel", Icon)
                lable:SetFont("DebugFixedSmall")
                lable:SetTextColor(color_black)
                lable:SetText(Model)
                lable:SetContentAlignment(5)
                lable:SetWide(self:GetWide())
                lable:AlignBottom(-42)
                Content:AddItem(Icon)
                number = number + 1
            end
        end

        self.PanelList:InvalidateLayout()
    end

    function PANEL:PerformLayout()
        self.PanelList:StretchToParent(0, 0, 0, 0)
    end

    local CreationSheet = vgui.RegisterTable(PANEL, "Panel")

    local function CreateContentPanel()
        local ctrl = vgui.CreateFromTable(CreationSheet)

        return ctrl
    end

    local function RemoveSandboxTabs()
    	local firstuser = {"superadmin"}
        local seconduser = {"moderator","admin","superadmin","Sponsor","MegaSponsor"}

        local tabstoremovefirst = {
	        	language.GetPhrase("spawnmenu.content_tab"),
		        language.GetPhrase("spawnmenu.category.npcs"),
		        language.GetPhrase("spawnmenu.category.entities"),
		        language.GetPhrase("spawnmenu.category.weapons"),
		        language.GetPhrase("spawnmenu.category.vehicles"),
		        language.GetPhrase("spawnmenu.category.postprocess"),
		        language.GetPhrase("spawnmenu.category.dupes"),
		        language.GetPhrase("spawnmenu.category.saves")
    	}
        local tabstoremovesecond = {
            language.GetPhrase("spawnmenu.content_tab"),
            language.GetPhrase("spawnmenu.category.npcs"),
            language.GetPhrase("spawnmenu.category.weapons"),
            language.GetPhrase("spawnmenu.category.postprocess"),
            language.GetPhrase("spawnmenu.category.dupes"),
            language.GetPhrase("spawnmenu.category.saves")
        }

        if !table.HasValue(firstuser, LocalPlayer():GetUserGroup()) then 
	    	for k, v in pairs(g_SpawnMenu.CreateMenu.Items) do
	            if table.HasValue(tabstoremovefirst, v.Tab:GetText()) then
	                g_SpawnMenu.CreateMenu:CloseTab(v.Tab, true)
	                RemoveSandboxTabs()
	            end
	        end
	    end
    	
   		if !table.HasValue(seconduser, LocalPlayer():GetUserGroup()) then 
	    	for k, v in pairs(g_SpawnMenu.CreateMenu.Items) do
	            if table.HasValue(tabstoremovesecond, v.Tab:GetText()) then
	                g_SpawnMenu.CreateMenu:CloseTab(v.Tab, true)
	                RemoveSandboxTabs()
	            end
	        end
	    end
    end

    hook.Add("SpawnMenuOpen", "blockmenutabs", RemoveSandboxTabs)

    local function BunkMenu()
        return
    end

    spawnmenu.AddCreationTab("Other", CreateContentPanel, "icon16/cake.png", 4)
end
--------------------------------------------------------------------------------
-- Spawn Menu by Ce1azz feat. Anterg0                                         --
-- Subscribe naxyi - https://www.youtube.com/channel/UC6wxpRA2esoEw2xlSL9X2DA --
--------------------------------------------------------------------------------